<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5FT65M7VB0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-5FT65M7VB0');
    </script>
    <title>Career Disruption Calculator</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light rounded mt-3">
            <div class="container-fluid">
                <a class="navbar-brand" href="#"><i class="fas fa-calculator me-2"></i>Career Calculator</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="#about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#upload">Upload</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#contact">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#infoOffcanvas">
                                <i class="fas fa-info-circle"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Offcanvas Info Panel -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="infoOffcanvas" aria-labelledby="infoOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="infoOffcanvasLabel">
                    <i class="fas fa-shield-alt text-primary me-2"></i>About This Tool
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div class="mb-4">
                    <h6 class="fw-bold mb-3">Privacy & Security</h6>
                    <div class="d-flex align-items-start mb-3">
                        <i class="fas fa-lock text-primary mt-1 me-3"></i>
                        <div>
                            <p class="mb-0">This calculator runs entirely in your browser. Your data never leaves your computer and is not collected or stored by us.</p>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <h6 class="fw-bold mb-3">Open Source</h6>
                    <div class="d-flex align-items-start mb-3">
                        <i class="fab fa-github text-primary mt-1 me-3"></i>
                        <div>
                            <p class="mb-2">This is an open source project. Feel free to review the code or contribute!</p>
                            <a href="https://github.com/eramezani/career" class="btn btn-outline-primary btn-sm" target="_blank">
                                <i class="fab fa-github me-2"></i>View on GitHub
                            </a>
                        </div>
                    </div>
                </div>

                <div>
                    <h6 class="fw-bold mb-3">Disclaimer</h6>
                    <div class="d-flex align-items-start">
                        <i class="fas fa-exclamation-circle text-primary mt-1 me-3"></i>
                        <div>
                            <p class="mb-0">This calculator provides estimates based on the input data. Users are responsible for verifying the accuracy of all calculations and results. The tool is provided "as is" without any warranty of accuracy or fitness for any particular purpose.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <header class="text-center my-5">
            <h1 class="display-4">Career Disruption Calculator</h1>
            <p class="lead text-muted">Calculate the impact of career disruptions on your professional journey</p>
        </header>

        <main>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div id="app">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- About Section -->
            <div id="about" class="row justify-content-center mt-4">
                <div class="col-md-8">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h2 class="h3 mb-4">About This Tool</h2>
                            <p class="lead">A specialised calculator for researchers to document career disruptions and calculate FTE years, particularly for NHMRC Investigator Grant applications.</p>
                            
                            <!-- Quick Start Guide -->
                            <div class="accordion mt-4" id="aboutAccordion">
                                <!-- What You'll Get -->
                                <div class="accordion-item">
                                    <h3 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOutput">
                                            <i class="fas fa-table text-primary me-2"></i>What You'll Get
                                        </button>
                                    </h3>
                                    <div id="collapseOutput" class="accordion-collapse collapse show" data-bs-parent="#aboutAccordion">
                                        <div class="accordion-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="card h-100 border-0 bg-light">
                                                        <div class="card-body">
                                                            <h4 class="h6 mb-3">Relative to Opportunity Results</h4>
                                                            <p class="small mb-2">Shows FTE years per position</p>
                                                            <div class="bg-white p-2 rounded">
                                                                <small class="text-muted">Example Output:</small>
                                                                <pre class="mb-0"><code>Research Fellow: 2.5 FTE years
Senior Research Fellow: 3.0 FTE years</code></pre>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="card h-100 border-0 bg-light">
                                                        <div class="card-body">
                                                            <h4 class="h6 mb-3">Career Disruption Results</h4>
                                                            <p class="small mb-2">Shows periods of reduced FTE</p>
                                                            <div class="bg-white p-2 rounded">
                                                                <small class="text-muted">Example Output:</small>
                                                                <pre class="mb-0"><code>01/01/2021 - 30/06/2021: 0.5 FTE
01/07/2021 - 31/12/2021: 0.8 FTE</code></pre>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- FTE Calculator -->
                                <div class="accordion-item">
                                    <h3 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCalculator">
                                            <i class="fas fa-calculator text-primary me-2"></i>FTE Calculator
                                        </button>
                                    </h3>
                                    <div id="collapseCalculator" class="accordion-collapse collapse" data-bs-parent="#aboutAccordion">
                                        <div class="accordion-body">
                                            <div class="row g-3">
                                                <div class="col-md-4">
                                                    <div class="card h-100 border-0 bg-light">
                                                        <div class="card-body">
                                                            <h4 class="h6 mb-3">Calculate FTE Years</h4>
                                                            <p class="small mb-2">Find FTE years between dates</p>
                                                            <div class="bg-white p-2 rounded">
                                                                <small class="text-muted">Example:</small>
                                                                <p class="mb-0 small">"What's my FTE from 2020-2022?"</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="card h-100 border-0 bg-light">
                                                        <div class="card-body">
                                                            <h4 class="h6 mb-3">Find Start Date</h4>
                                                            <p class="small mb-2">Calculate when to start</p>
                                                            <div class="bg-white p-2 rounded">
                                                                <small class="text-muted">Example:</small>
                                                                <p class="mb-0 small">"When should I start to get 5 FTE years by 2025?"</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="card h-100 border-0 bg-light">
                                                        <div class="card-body">
                                                            <h4 class="h6 mb-3">Find End Date</h4>
                                                            <p class="small mb-2">Calculate when you'll reach target</p>
                                                            <div class="bg-white p-2 rounded">
                                                                <small class="text-muted">Example:</small>
                                                                <p class="mb-0 small">"When will I reach 10 FTE years from 2020?"</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- How to Use -->
                                <div class="accordion-item">
                                    <h3 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseUsage">
                                            <i class="fas fa-play-circle text-primary me-2"></i>How to Use
                                        </button>
                                    </h3>
                                    <div id="collapseUsage" class="accordion-collapse collapse" data-bs-parent="#aboutAccordion">
                                        <div class="accordion-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="h6 mb-3">Step 1: Download Template</h4>
                                                    <p class="small mb-3">Get started with our CSV template that includes example data.</p>
                                                    <a href="#" class="btn btn-primary btn-sm" id="templateDownloadBtn">
                                                        <i class="fas fa-download me-2"></i>Download Template
                                                    </a>
                                                </div>
                                                <div class="col-md-6">
                                                    <h4 class="h6 mb-3">Step 2: Prepare Your Data</h4>
                                                    <p class="small mb-2">Your CSV file should include:</p>
                                                    <ul class="small mb-0">
                                                        <li>start_date (DD/MM/YYYY)</li>
                                                        <li>end_date (DD/MM/YYYY)</li>
                                                        <li>fte (0 to 1)</li>
                                                        <li>position (role title)</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upload Section -->
            <div id="upload" class="row justify-content-center mt-5">
                <div class="col-md-8">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h2 class="h3 mb-4">Upload Your Career Timeline</h2>
                            <div class="upload-container">
                                <div class="upload-area p-4 border rounded text-center mb-3" id="dropZone">
                                    <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                    <h4 class="h5 mb-2">Drag & Drop your CSV file here</h4>
                                    <p class="text-muted mb-3">or</p>
                                    <label for="fileInput" class="btn btn-primary">
                                        <i class="fas fa-folder-open me-2"></i>Browse Files
                                    </label>
                                    <input type="file" id="fileInput" accept=".csv" class="d-none">
                                </div>
                                <div id="validationResults" class="mt-3" style="display: none;">
                                    <!-- Disclaimer Alert -->
                                    <div class="alert alert-warning alert-dismissible fade show" role="alert">
                                        <h5 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Important Disclaimer</h5>
                                        <p class="mb-0">This calculator provides estimates based on the input data. All calculations are performed locally in your browser - your data never leaves your computer. Users are responsible for verifying the accuracy of all calculations and results. The tool is provided "as is" without any warranty of accuracy or fitness for any particular purpose.</p>
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                    <div id="validationList" class="list-group">
                                        <!-- Validation results will be inserted here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FTE Calculator Section -->
            <div id="fte-calculator" class="row justify-content-center mt-4" style="display: none;">
                <div class="col-md-8">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h2 class="h3 mb-4">FTE Calculator</h2>
                            <p class="text-muted mb-4">Calculate FTE years for any date range or find dates that match your target FTE.</p>
                            
                            <div class="calculator-form">
                                <!-- Calculation Mode Selection -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">What would you like to calculate?</label>
                                    <div class="btn-group w-100" role="group">
                                        <input type="radio" class="btn-check" name="calcMode" id="calcFte" value="fte" checked>
                                        <label class="btn btn-outline-primary" for="calcFte">
                                            <i class="fas fa-calculator me-2"></i>Calculate FTE Years
                                        </label>
                                        
                                        <input type="radio" class="btn-check" name="calcMode" id="calcStart" value="start">
                                        <label class="btn btn-outline-primary" for="calcStart">
                                            <i class="fas fa-calendar-plus me-2"></i>Find Start Date
                                        </label>
                                        
                                        <input type="radio" class="btn-check" name="calcMode" id="calcEnd" value="end">
                                        <label class="btn btn-outline-primary" for="calcEnd">
                                            <i class="fas fa-calendar-plus me-2"></i>Find End Date
                                        </label>
                                    </div>
                                </div>

                                <!-- Input Fields -->
                                <div class="row g-3">
                                    <!-- Start Date Input -->
                                    <div class="col-md-6 calc-input" data-mode="fte,end">
                                        <label for="startDate" class="form-label">Start Date</label>
                                        <input type="text" class="form-control" id="startDate" placeholder="DD/MM/YYYY">
                                    </div>

                                    <!-- End Date Input -->
                                    <div class="col-md-6 calc-input" data-mode="fte,start">
                                        <label for="endDate" class="form-label">End Date</label>
                                        <input type="text" class="form-control" id="endDate" placeholder="DD/MM/YYYY">
                                    </div>

                                    <!-- FTE Years Input -->
                                    <div class="col-md-6 calc-input" data-mode="start,end">
                                        <label for="fteYears" class="form-label">Target FTE Years</label>
                                        <input type="number" class="form-control" id="fteYears" placeholder="0.00" step="0.01">
                                    </div>
                                </div>

                                <!-- Assumed FTE Inputs -->
                                <div id="assumedFteContainer" class="row g-3 mt-2" style="display: none;">
                                    <div id="beforeFteContainer" class="col-md-6" style="display: none;">
                                        <label for="beforeFte" class="form-label">Assumed FTE Before First Record</label>
                                        <input type="number" class="form-control" id="beforeFte" placeholder="0.00" step="0.01" min="0" max="1">
                                        <small class="text-muted">Default: First record's FTE</small>
                                    </div>
                                    <div id="afterFteContainer" class="col-md-6" style="display: none;">
                                        <label for="afterFte" class="form-label">Assumed FTE After Last Record</label>
                                        <input type="number" class="form-control" id="afterFte" placeholder="0.00" step="0.01" min="0" max="1">
                                        <small class="text-muted">Default: Last record's FTE</small>
                                    </div>
                                </div>

                                <!-- Instructions -->
                                <div class="mt-3">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Instructions:</strong>
                                        <ul class="mb-0 mt-2" id="calcInstructions">
                                            <li>Enter start and end dates to calculate FTE years</li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- Results and Warnings -->
                                <div class="mt-3">
                                    <div id="calculatorWarning" class="alert alert-warning" style="display: none;"></div>
                                    <div id="calculatorResult" class="alert alert-info" style="display: none;"></div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="mt-3">
                                    <button class="btn btn-primary" id="calculateBtn">
                                        <i class="fas fa-calculator me-2"></i>Calculate
                                    </button>
                                    <button class="btn btn-outline-secondary ms-2" id="resetBtn">
                                        <i class="fas fa-redo me-2"></i>Reset
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Section -->
            <div id="contact" class="row justify-content-center mt-5">
                <div class="col-md-8">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h2 class="h3 mb-4">Contact Us</h2>
                            <p class="mb-4">Have questions or feedback? Feel free to reach out to our team:</p>
                            <div class="contact-list">
                                <div class="contact-item mb-3">
                                    <i class="fas fa-envelope me-2 text-primary"></i>
                                    <a href="mailto:ramezani.e@wehi.edu.au" class="contact-link">ramezani.e@wehi.edu.au</a>
                                    <span class="text-muted ms-2">- Support and Technical Issues</span>
                                </div>
                                <div class="contact-item mb-3">
                                    <i class="fas fa-envelope me-2 text-primary"></i>
                                    <a href="mailto:davidson.n@wehi.edu.au" class="contact-link">davidson.n@wehi.edu.au</a>
                                    <span class="text-muted ms-2">- Support and Technical Issues</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="text-center mt-5 mb-3">
            <div class="d-flex justify-content-center align-items-center mb-2">
                <a href="https://github.com/eramezani/career" class="text-muted text-decoration-none me-3" target="_blank">
                    <i class="fab fa-github fa-lg"></i> View on GitHub
                </a>
                <span class="text-muted">|</span>
                <span class="text-muted ms-3">© 2025 Ehsan Ramezani. All rights reserved.</span>
            </div>
            <p class="text-muted small">This is an open source project. Feel free to contribute or report issues on GitHub.</p>
        </footer>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="script.js"></script>

    <!-- Add script for first-time visit handling -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if this is the first visit
            if (!localStorage.getItem('hasVisitedBefore')) {
                // Show the info panel
                var infoOffcanvas = new bootstrap.Offcanvas(document.getElementById('infoOffcanvas'));
                infoOffcanvas.show();
                
                // Set the flag in localStorage
                localStorage.setItem('hasVisitedBefore', 'true');
            }
        });
    </script>
</body>
</html> 